CREATE DATABASE calidatos;

SHOW DATABASES;

USE calidatos

CREATE TABLE usuarios (
id INT AUTO_INCREMENT PRIMARY KEY,
user VARCHAR(255) NOT NULL,
password VARCHAR(255) NOT NULL,
userType ENUM('admin', 'cliente', 'tienda') NOT NULL
);

CREATE TABLE accionesTapa (
id INT AUTO_INCREMENT PRIMARY KEY,
estadoTapa VARCHAR(255) NOT NULL,
fechahora DATETIME
);

Para agregar el nuevo campo de userType:

-- Paso 1: Desactivar restricciones de clave externa temporalmente
SET foreign_key_checks = 0;

-- Paso 2: Agregar el campo a la tabla usuarios
ALTER TABLE usuarios ADD COLUMN userType ENUM('admin', 'cliente', 'tienda') NOT NULL;

-- Paso 3: Reactivar restricciones de clave externa
SET foreign_key_checks = 1;


CREATE TABLE datosnodo (
id int AUTO_INCREMENT,
idnodo INT,
temperatura DOUBLE,
humedad DOUBLE,
fechahora DATETIME,
PRIMARY KEY (id));

SHOW TABLES;

SELECT * FROM datosnodo;
DELETE FROM datosnodo WHERE idnodo=2;

CREATE TABLE datosUltrasonido (
id int AUTO_INCREMENT PRIMARY KEY,
usuario_id INT,
idnodo INT,
distancia DOUBLE,
fechahora DATETIME,
FOREIGN KEY (usuario_id) REFERENCES usuarios(id));

CREATE TABLE datosPeso (
id int AUTO_INCREMENT PRIMARY KEY,
usuario_id INT,
idnodo INT,
peso DOUBLE,
fechahora DATETIME,
FOREIGN KEY (usuario_id) REFERENCES usuarios(id));

CREATE TABLE datosInfrarrojo (
id int AUTO_INCREMENT PRIMARY KEY,
usuario_id INT,
idnodo INT,
actividad int,
fechahora DATETIME,
FOREIGN KEY (usuario_id) REFERENCES usuarios(id));